{% extends 'base.html' %}
{% block title_block %}
    Water Island Positions Database
{% endblock %}
{% load staticfiles %}

{% block css_styles %}
    {{ block.super }}
{% endblock %}

{% block datatables_bootstrap_css %}
    {{ block.super }}
{% endblock %}

{% block content %}
    <input type="hidden" id="as_of_wic_positions" value="{{ as_of }}">
    {# Show a Button to Add a new Deal#}
    <div class="app-content content">
        <div class="content-wrapper">
            <div class="content-header row">
            </div>
            <div class="content-body">
                <section class="row">
                    <div class="col-12">
                        <div class="card">
                            <div class="card-head">
                                <div class="card-header">
                                    <h4 class="card-title font-medium-3 center">Water Island Positions Database</h4>
                                    <a class="heading-elements-toggle"><i class="ft-ellipsis-h font-medium-3"></i></a>
                                    <div class="heading-elements">
                                        <div class="row">
                                            <div class="col-lg-6">
                                                <input type="date" class="form-control" required min="2018-10-31"
                                                       id="wic_detailed_as_of">
                                            </div>
                                            <div class="col-lg-2">
                                                <button id='positions_details_download' class="btn btn-primary btn-sm">
                                                    <i class="ft-plus white"></i> Download Detailed Report
                                                </button>
                                            </div>
                                        </div>

                                    </div>
                                    <br>
                                    <div class="row">
                                        <div class="col-lg-4"></div>
                                        <div class="col-lg-1 block-tag">
                                            <small class="badge badge-default badge-success">Browse Historical Positions
                                            </small>
                                        </div>
                                        <div class="col-lg-2">
                                            <fieldset class="form-group">
                                                <input type="date" class="form-control" required min="2018-10-31"
                                                       id="wic_positions_as_of">
                                            </fieldset>
                                        </div>
                                        <div class="col-lg-1">
                                            <fieldset class="form-group">
                                                <button type="button" class="btn btn-info"
                                                        id="submit_wic_positions_as_of">
                                                    Submit
                                                </button>
                                            </fieldset>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="card-content">
                                <div class="table-responsive">
                                    <!-- Task List table -->
                                    <table class="table table-striped table-bordered" id='wic_positions_table'
                                           style="font-size:12px;">
                                        <thead>
                                        <tr>
                                            <th>TradeDate</th>
                                            <th>Fund</th>
                                            <th>Sleeve</th>
                                            <th>Bucket</th>
                                            <th>AlphaHedge</th>
                                            <th>Catalyst Type</th>
                                            <th>Catalyst Rating</th>
                                            <th>TradeGroup</th>
                                            <th>Ticker</th>
                                            <th>Amount</th>
                                            <th>Price</th>
                                            <th>CurrentMktVal</th>
                                            <th>AUM</th>
                                            <th>CurrentMktVal %</th>
                                            <th>Local</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        {% for row in positions %}
                                            <tr>
                                                <td>{{ row.flat_file_as_of }}</td>
                                                <td>{{ row.fund }}</td>
                                                <td>{{ row.Sleeve }}</td>
                                                <td>{{ row.Bucket }}</td>
                                                <td>{{ row.AlphaHedge }}</td>
                                                <td>{{ row.CatalystTypeWIC }}</td>
                                                <td>{{ row.CatalystRating }}</td>
                                                <td>{{ row.TradeGroup }}</td>
                                                <td>{{ row.Ticker }}</td>
                                                <td>{{ row.amount }}</td>
                                                <td>{{ row.Price }}</td>
                                                <td>{{ row.CurrentMktVal }}</td>
                                                <td>{{ row.aum }}</td>
                                                <td>{{ row.CurrentMktVal_Pct }}</td>
                                                <td>{{ row.CCY }}</td>

                                            </tr>
                                        {% endfor %}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </div>

    <script src="{% static 'app-assets/vendors/js/vendors.min.js' %}" type="text/javascript"></script>
    <script src="{% static 'app-assets/js/core/positions_database.js' %}" type="text/javascript"></script>


{% endblock %}